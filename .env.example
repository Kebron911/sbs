# ============================================================
# SBS n8n Ecosystem Environment Configuration
# Compatible with 25+ subflows and enterprise architecture
# Last Updated: October 28, 2025
# ============================================================

# ============================================================
# DATABASE CONFIGURATION
# ============================================================

# Primary Database Connection
DB_PASSWORD=your_secure_password_here_change_this_in_production
DB_HOST=postgres
DB_PORT=5432
DB_NAME=lifeos_db
DB_USER=lifeos_app

# Database Performance (Optional overrides)
DB_MAX_CONNECTIONS=200
DB_SHARED_BUFFERS=256MB
DB_EFFECTIVE_CACHE_SIZE=1GB

# ============================================================
# N8N CORE CONFIGURATION
# ============================================================

# Webhook and Base URLs (Update port to match docker-compose.yml)
N8N_WEBHOOK_BASE_URL=https://your-n8n-domain.com:15678
SUBFLOW_BASE_URL=https://your-n8n-domain.com:15678

# Security Keys (IMPORTANT: Generate unique values for production)
N8N_ENCRYPTION_KEY=your-32-character-encryption-key-here-change-this
N8N_USER_MANAGEMENT_JWT_SECRET=your-jwt-secret-here-change-this-in-production

# n8n Instance Configuration
N8N_HOST=0.0.0.0
N8N_PORT=5678
N8N_PROTOCOL=https
GENERIC_TIMEZONE=America/Denver

# Execution Settings
EXECUTIONS_PROCESS=main
EXECUTIONS_DATA_PRUNE=true
EXECUTIONS_DATA_MAX_AGE=168
LOG_LEVEL=info

# ============================================================
# EXTERNAL API INTEGRATIONS
# ============================================================

# OpenAI Integration (Required for AI subflows)
OPENAI_API_KEY=sk-your-openai-api-key-here

# Telegram Bot Integration
TELEGRAM_BOT_TOKEN=123456789:ABC-DEF1234ghIkl-zyx57W2v1u123ew11
TELEGRAM_CHAT_ID=your_telegram_chat_id_here

# Additional AI Services (Optional)
CLAUDE_API_KEY=your-claude-api-key-here
HUGGINGFACE_API_KEY=your-huggingface-token-here

# ============================================================
# SBS ECOSYSTEM SPECIFIC SETTINGS
# ============================================================

# Environment Configuration
SBS_ENVIRONMENT=production
CORRELATION_ID_ENABLED=true

# Enhanced Logging Configuration
SYSTEM_LOGS_RETENTION_DAYS=90
ERROR_LOGS_RETENTION_DAYS=365
LOG_LEVEL_OVERRIDE=info

# Game Mechanics Configuration
DEFAULT_XP_MULTIPLIER=1.00
DEFAULT_STARTING_COINS=100
DEFAULT_STARTING_HP=100
MAX_ROUTINE_STREAK=365

# Character Progression Settings
PRESTIGE_XP_THRESHOLD=1000000
LEVEL_XP_BASE=100
LEVEL_XP_MULTIPLIER=1.2

# ============================================================
# PERFORMANCE & MONITORING
# ============================================================

# Redis Configuration (Optional - for caching)
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=optional_redis_password

# Monitoring and Metrics
ENABLE_METRICS=true
METRICS_PORT=9090
HEALTH_CHECK_INTERVAL=30

# ============================================================
# SECURITY SETTINGS
# ============================================================

# Session Configuration
SESSION_TIMEOUT=3600
MAX_LOGIN_ATTEMPTS=5
LOCKOUT_DURATION=900

# CORS and Security Headers
ALLOWED_ORIGINS=https://your-domain.com
ENABLE_CORS=true
SECURE_COOKIES=true

# Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS_PER_MINUTE=100

# ============================================================
# BACKUP AND MAINTENANCE
# ============================================================

# Database Backup Settings
DB_BACKUP_ENABLED=true
DB_BACKUP_SCHEDULE=0 2 * * *
DB_BACKUP_RETENTION_DAYS=30

# n8n Workflow Backup
N8N_BACKUP_ENABLED=true
N8N_BACKUP_PATH=/backup
WORKFLOW_EXPORT_SCHEDULE=0 3 * * *

# ============================================================
# OPTIONAL FEATURES
# ============================================================

# Email Notifications (Optional)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password
EMAIL_FROM=noreply@your-domain.com

# Webhook Security
WEBHOOK_SECRET=your-webhook-secret-for-external-integrations

# File Storage (Optional)
STORAGE_TYPE=local
STORAGE_PATH=/home/node/.n8n/storage
MAX_FILE_SIZE=10MB

# ============================================================
# DEVELOPMENT SETTINGS (Remove in production)
# ============================================================

# Debug Configuration
DEBUG_MODE=false
VERBOSE_LOGGING=false
DEVELOPMENT_WEBHOOK_URL=http://localhost:5678

# Testing Configuration
TEST_MODE=false
MOCK_EXTERNAL_APIS=false

# ============================================================
# PRODUCTION DEPLOYMENT NOTES
# ============================================================

# Before deploying to production:
# 1. Change all passwords and secrets
# 2. Update N8N_WEBHOOK_BASE_URL to your actual domain
# 3. Set SBS_ENVIRONMENT=production
# 4. Enable SSL/TLS certificates
# 5. Configure proper firewall rules
# 6. Set up monitoring and alerting
# 7. Configure automated backups
# 8. Review and adjust rate limits
# 9. Enable security headers
# 10. Test all integrations

# Security Checklist:
# ✓ Unique DB_PASSWORD (min 16 characters)
# ✓ Unique N8N_ENCRYPTION_KEY (32 characters)
# ✓ Unique N8N_USER_MANAGEMENT_JWT_SECRET
# ✓ Proper TELEGRAM_BOT_TOKEN
# ✓ Valid OPENAI_API_KEY
# ✓ HTTPS enabled (N8N_PROTOCOL=https)
# ✓ Secure webhook URLs
# ✓ Firewall configured
# ✓ Regular security updates

# Performance Checklist:
# ✓ Database connection pooling configured
# ✓ Execution data pruning enabled
# ✓ Redis caching (optional but recommended)
# ✓ Proper resource limits set
# ✓ Monitoring enabled
# ✓ Log rotation configured

# ============================================================
# END OF CONFIGURATION
# ============================================================